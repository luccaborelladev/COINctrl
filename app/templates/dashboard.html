{% extends "base.html" %}

{% block content %}
<div class="card-header">
    <h1 class="card-title">
        <i class="fas fa-tachometer-alt"></i>
        Dashboard
    </h1>
    <p>Bem-vindo, {{ current_user.email }}!</p>
</div>

<div class="dashboard-stats">
    <div class="stat-card">
        <div class="stat-value positive">
            R$ {{ "%.2f"|format(balance) }}
        </div>
        <div class="stat-label">Saldo Atual</div>
    </div>
    <div class="stat-card">
        <div class="stat-value neutral">
            {{ recent_transactions|length }}
        </div>
        <div class="stat-label">Transações Recentes</div>
    </div>
    <div class="stat-card">
        <div class="stat-value neutral">
            <i class="fas fa-plus"></i>
        </div>
        <div class="stat-label">
            <a href="{{ url_for('transactions.add_transaction') }}" class="btn btn-primary">
                Nova Transação
            </a>
        </div>
    </div>
</div>

{% if recent_transactions %}
<div class="card">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fas fa-history"></i>
            Transações Recentes
        </h3>
    </div>
    
    <table class="table">
        <thead>
            <tr>
                <th>Data</th>
                <th>Descrição</th>
                <th>Categoria</th>
                <th>Valor</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in recent_transactions %}
            <tr>
                <td>{{ transaction.date.strftime('%d/%m/%Y') }}</td>
                <td>{{ transaction.description }}</td>
                <td>
                    {% if transaction.category %}
                        {{ transaction.category.name }}
                    {% else %}
                        <span style="color: #999;">Sem categoria</span>
                    {% endif %}
                </td>
                <td>
                    <span class="{% if transaction.type == 'income' %}positive{% else %}negative{% endif %}">
                        {% if transaction.type == 'income' %}+{% else %}-{% endif %}
                        R$ {{ "%.2f"|format(transaction.amount) }}
                    </span>
                </td>
                <td>
                    <a href="{{ url_for('transactions.view_transaction', transaction_id=transaction.id) }}" class="btn btn-secondary" style="padding: 0.25rem 0.5rem; font-size: 0.8rem;">
                        <i class="fas fa-eye"></i>
                    </a>
                    <a href="{{ url_for('transactions.edit_transaction', transaction_id=transaction.id) }}" class="btn btn-primary" style="padding: 0.25rem 0.5rem; font-size: 0.8rem;">
                        <i class="fas fa-edit"></i>
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="card">
    <div style="text-align: center; padding: 2rem;">
        <i class="fas fa-inbox" style="font-size: 4rem; color: #ccc; margin-bottom: 1rem;"></i>
        <h3>Nenhuma transação encontrada</h3>
        <p>Comece adicionando sua primeira transação!</p>
        <a href="{{ url_for('transactions.add_transaction') }}" class="btn btn-primary">
            <i class="fas fa-plus"></i>
            Adicionar Transação
        </a>
    </div>
</div>
{% endif %}
{% endblock %}